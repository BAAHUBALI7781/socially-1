class ChatEngine{constructor(s,e,n,a){console.log(a),this.chatBox=$(`#${s}`),this.chatRoom=e,this.userEmail=n,this.userName=a,this.socket=io.connect("http://localhost:5000",{transports:["websocket","polling","flashsocket"]}),this.userEmail&&this.connectionHandler()}connectionHandler(){let s=this;this.socket.on("connect",function(){console.log("Connection established using sockets...!")}),s.socket.emit("join_room",{username:"Socio Chat Bot",message:`${s.userName} is online...`,user_email:"socio.510818090@gmail.com",room_id:`${s.chatRoom}`}),s.socket.on("user_join",function(s){console.log(s);let e=document.createElement("div");e.classList.add("seperate-message"),e.innerHTML=`\n                    <div class="details">\n                        <span>${s.username}</span>\n                        <div>\n                            <span>${s.date} | </span>\n                            <span>${s.time}</span>\n                        </div>\n                    </div>\n                    <div class="message">\n                        <span>${s.message}</span>\n                    </div>\n            `,$("#message-list-container").append(e);const n=document.getElementById("message-list-container");n.scrollTop=n.scrollHeight}),$("#send-message").click(function(){let e=$("#message-input").val(),n=$("#message-link").val(),a=$("#reply-link").val();console.log(a),""!=a&&(console.log(typeof e),e=e.slice(20),console.log(e)),""!=e&&s.socket.emit("send",{username:s.userName,message:e,link:n,user_email:s.userEmail,room_id:`${s.chatRoom}`,reply:a}),$("#message-input").val(""),$("#message-link").val(""),$("#reply-link").val("")}),s.socket.on("receive",function(e){let n=document.createElement("div");n.setAttribute("id",`${e.id}`),e.user_email==s.userEmail?""!=e.reply?n.innerHTML=`\n                    <div class="seperate-message" id="${e.id.slice(20)}">\n                        <div class="details" id="user_detail">\n                            <span>${e.username} </span>\n                            <span>Msg. Id : ${e.id.slice(20)}</span>\n                            <div>\n                                <span>${e.date} | </span>\n                                <span>${e.time}  </span>\n                            </div>\n                        </div>\n                        <div class="message" >\n                            <div class="message-detail">\n                                <div>Replying to <a href="#${e.reply}">#${e.reply}</a></div>  \n                                <span>${e.message} </span>\n                                <p><a href="${e.link}" target="_blank">${e.link}</a></p>\n                            \n                            </div>\n                            <div class="message-setting">\n                                <a class="message-reply" href="${e.id.slice(20)}"><i class="fas fa-reply"></i></a>\n                                <a class="message-delete" href="delete/${e.id}"><i class="fas fa-trash-alt"></i></a>                               \n                            </div>\n                        </div>\n                    </div>\n            `:n.innerHTML=`\n                <div class="seperate-message" id="${e.id.slice(20)}">\n                    <div class="details" id="user_detail">\n                        <span>${e.username} </span>\n                        <span>Msg. Id : ${e.id.slice(20)}</span>\n                        <div>\n                            <span>${e.date} | </span>\n                            <span>${e.time}  </span>\n                        </div>\n                    </div>\n                    <div class="message">\n                        <div class="message-detail">     \n                                            \n                            <span>${e.message} </span>\n                            <p><a href="${e.link}" target="_blank">${e.link}</a></p>\n                        \n                        </div>\n                        <div class="message-setting">\n                            <a class="message-reply" href="${e.id.slice(20)}"><i class="fas fa-reply"></i></a>\n                            <a class="message-delete" href="delete/${e.id}"><i class="fas fa-trash-alt"></i></a>                               \n                        </div>\n                    </div>\n                </div>\n               \n            `:""!=e.reply?n.innerHTML=`\n                <div class="seperate-message" id="${e.id.slice(20)}">\n                    <div class="details">\n                        <span>${e.username} </span>\n                        <span>Msg. Id : ${e.id.slice(20)}</span>\n                        <div>\n                            <span>${e.date} | </span>\n                            <span>${e.time}  </span>\n                        </div>\n                    </div>\n                    <div class="message">\n                        <div class="message-detail">\n                            <div>Replying to <a href="#${e.reply}">#${e.reply}</a></div>   \n                            <span>${e.message} </span>\n                            <p><a href="${e.link}" target="_blank">${e.link}</a></p>\n                        \n                        </div>\n                        <div class="message-setting">\n                            <a class="message-reply" href="${e.id.slice(20)}"><i class="fas fa-reply"></i></a>\n                        </div>\n                    </div>\n                </div>\n                \n                `:n.innerHTML=`\n                    <div class="seperate-message" id="${e.id.slice(20)}">\n                        <div class="details">\n                            <span>${e.username} </span>\n                            <span>Msg. Id : ${e.id.slice(20)}</span>\n                            <div>\n                                <span>${e.date} | </span>\n                                <span>${e.time}  </span>\n                            </div>\n                        </div>\n                        <div class="message">\n                            <div class="message-detail">                           \n                                <span>${e.message} </span>\n                                <p><a href="${e.link}" target="_blank">${e.link}</a></p> \n                            </div>\n                            <div class="message-setting">\n                                <a class="message-reply" href="${e.id.slice(20)}"><i class="fas fa-reply"></i></a>\n                            </div>\n                        </div>\n                    </div>\n                    \n                `,$("#message-list-container").append(n),console.log(n);const a=document.getElementById("message-list-container");a.scrollTop=a.scrollHeight,$(".message-reply").each(function(){new Reply(this)}),$(".message-delete").each(function(){new Delete(this)})})}}